{"version":3,"sources":["gameplay.js","ChoiceEffectDisplay.js","DecisionPrompt.js","EnvironmentDecision.js","TimeElapsePlaceholder.js","AlgaeMinimap.js","Engine.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","locations","shallow_sea","title","effectText","description","image","video","minimap","helpText","algal_ceiling","growth_factor","deep_sea","lowland_river","upland_river","lake","climate","eligible_areas","options","effect","duration","algae_survive","choices","ChoiceEffectDisplay","props","state","advanceTimeoutSeconds","choice","effectDisplayTimeout","advancePercent","advanceTimeoutRemaining","advanceTimeoutHandle","this","setInterval","advance","bind","clearTimeout","setState","newState","clearInterval","setTimeout","onComplete","media","playing","loop","url","onEnded","onError","Image","centered","src","Segment","raised","advanceTimer","Progress","percent","size","style","marginRight","padding","maxWidth","marginLeft","Header","Container","fluid","marginTop","React","Component","DecisionPrompt","mediaPlaying","activeQuestion","buttons","i","question","push","Popup","position","trigger","Button","primary","onClick","e","onSelect","Content","length","Or","decision","Group","onMediaEnd","gameplay","locationCards","Object","entries","forEach","locationId","location","Card","wrapped","ui","Description","itemsPerRow","TimeElapsePlaceholder","AlgaeMinimap","canvasWidth","canvasHeight","canvasWaterMask","drawCanvas","ctx","osc","OffscreenCanvas","oscCtx","getContext","fillStyle","beginPath","arc","Math","floor","width","height","PI","fill","srcImageData","getImageData","dstImageData","x","y","coord","data","putImageData","refs","canvas","img","drawImage","onload","ref","overflow","background","visibility","Engine","weekCount","weeklyChoiceChance","location_name","question_list","build_question_list","question_count","ongoingEffects","currentAlgae","newEffects","remove_indices","iteration_growth_factor","iteration_algae_survive","index","splice","random_questions","filter","includes","sort","random","pop","App","selectedLocation","weekNumber","secondsToWeekAdvance","weekAdvancePercentage","weekAdvanceIntervalSeconds","algaeQuantity","videoPlaying","ongoingMultipliers","gameEnd","activeLocation","engine","weekAdvanceTimeout","answerQuestion","tickWeek","effects","choiceEffectDisplay","grow","nextQuestion","nextAdvanceCallback","activeContent","round","toString","replace","selectLocation","Sidebar","direction","visible","textAlign","paddingTop","Statistic","widths","Label","Value","parse","add","weeks","format","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5055ae7c.chunk.js","sourcesContent":["\nconst gameplay = {\n  locations: {\n    shallow_sea: {\n      title: \"Shallow Sea\",\n      effectText: \"\",\n      description: \"Shallow coastal seas are predominantly found at the coastlines of land masses. Many coastal citites have grown up around river estuaries and the sheltered waters that make them suitable for ports.\",\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/shallow_sea.jpg?raw=true\",\n      video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/shallow_seas.mp4?raw=true\",\n        minimap: \"https://raw.githubusercontent.com/Verocoder/algae-adventure/master/src/images/algae-minimap-shallow-sea.png\",\n      helpText:\n        \"Shallow sea areas have some kind of feature that make them either good or not good for growing algae\",\n      algal_ceiling: 1000000000000,\n      growth_factor: 4\n    },\n    deep_sea: {\n      title: \"Deep Sea\",\n      effectText: \"\",\n      description: \"Deep seas, such as those found far out from any land masses,are full of algae. However, the turbulent, relatively low nutrient conditions and cool temperatures mean that algal blooms are rare.\",\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/deep_sea.jpg?raw=true\",\n      video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/deep_seas.mp4?raw=true\",\n        minimap: \"https://raw.githubusercontent.com/Verocoder/algae-adventure/master/src/images/algae-minimap-deep-sea.png\",\n      helpText:\n        \"Shallow sea areas have some kind of feature that make them either good or not good for growing algae\",\n      algal_ceiling: 1000000000000000,\n      growth_factor: 1.5\n    },\n    lowland_river: {\n      title: \"Lowland Rivers\",\n      effectText: \"\",\n      description: \"Lowland rivers tend to run through relatively flat, fertile land, where much of the world's intensive agriculture takes place. Many inland cities have grown up around crossing points on lowland rivers.\",\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/river.jpg?raw=true\",\n      video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/flowing_river_2.mp4?raw=true\",\n        minimap: \"https://raw.githubusercontent.com/Verocoder/algae-adventure/master/src/images/algae-minimap-lowland-river.png\",\n      helpText:\n        \"Shallow sea areas have some kind of feature that make them either good or not good for growing algae\",\n      algal_ceiling: 250000,\n      growth_factor: 2\n    },\n    upland_river: {\n      title: \"Upland River\",\n      effectText: \"\",\n      description: \"Upland rivers tend to be shallow, fast flowing and cold. Many of them run through sparsely populated areas with steep landforms poorly suited to intensive agriculture.\",\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/upland_river.png?raw=true\",\n      video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/upland_river_2.mp4?raw=true\",\n        minimap: \"https://raw.githubusercontent.com/Verocoder/algae-adventure/master/src/images/algae-minimap-upland-river.png\",\n      helpText:\n        \"Shallow sea areas have some kind of feature that make them either good or not good for growing algae\",\n      algal_ceiling: 250000,\n      growth_factor: 1\n    },\n    lake: {\n      title: \"Lakes and Ponds\",\n      effectText: \"\",\n      description: \"In spring and summer, the still waters in lakes warm up quickly. During times of heavy rainfall, nutrients can leach into the lake via soil washed away from the surrounding land\",\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/lakes.jpg?raw=true\",\n      video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/lakes_ponds_2.mp4?raw=true\",\n        minimap: \"https://raw.githubusercontent.com/Verocoder/algae-adventure/master/src/images/algae-minimap-lake.png\",\n      helpText:\n        \"Shallow sea areas have some kind of feature that make them either good or not good for growing algae\",\n      algal_ceiling: 50000,\n      growth_factor: 2.5\n    }\n  },\n  climate: {\n    title: \"Climate\",\n    video: null,\n    image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/sun.jpg?raw=true\",\n    // all areas\n      eligible_areas: [\"upland_river\", \"lowland_river\", \"lake\", \"shallow_sea\", \"deep_sea\"],\n    description: \"\",\n    helpText: \"\",\n    options: [\n      {\n        title: \"Warm Climate\",\n        effectText: \"Warm weather will help algae grow...\",\n        video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/warmer_climes.mp4?raw=true\",\n        image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/sun.jpg?raw=true\",\n        description:\n          \"This is a warm climate - as a bloom, you will do super well here\",\n        effect: {\n          duration: -1,\n          algae_survive: 1,\n          growth_factor: 2\n        }\n      },\n      {\n        title: \"Cold Climate\",\n        effectText: \"Cooler weather slows the growth of algae...\",\n        video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/cooler_climes.mp4?raw=true\",\n        image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/storm.webp?raw=true\",\n        description:\n          \"This is a cold climate. as a bloom, you won't do as well here\",\n        effect: {\n          duration: -1,\n          algae_survive: 1,\n          growth_factor: 0.5\n        }\n      }\n    ]\n  },\n  choices: [\n    {\n      title: \"Population Density\",\n      // video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/high_pop.mp4?raw=true\",\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/city.jpg?raw=true\",\n      eligible_areas: [\"upland_river\", \"lowland_river\", \"lake\"],\n      description: \"\",\n      helpText: \"\",\n      options: [\n        {\n          title: \"High Population\",\n          effectText: \"Due to a growing population, cities are increasing in size, leading to an increase in sewage works leaking nutrient rich treated sewage into the rivers and seas. Intensive agriculture is also on the rise, meaning higher levels of fertiliser usage and increased soil run-off.\",\n          video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/high_pop.mp4?raw=true\",\n          description: \"Increase population\",\n          effect: {\n            duration: 4,\n            algae_survive: 1,\n            growth_factor: 3\n          }\n        },\n        {\n          title: \"Low Population\",\n          effectText: \"In countries where people live in relatively small communities, the discharge of sewage works has less of an impact on individual rivers and lakes. A lower intensity of agriculture and lower fertiliser usage also means lower soil run-off rates.\",\n      video: \"https://github.com/Verocoder/algae-adventure/blob/master/src/videos/low_pop.mp4?raw=true\",\n          image: \"\",\n          description: \"Decrease Population\",\n          effect: {\n            duration: 4,\n            algae_survive: 1,\n            growth_factor: 1\n          }\n        }\n      ]\n    },\n    {\n      title: \"Some geese decide to nest near you!\",\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/lilducks.jpg?raw=true\",\n      eligible_areas: [\"upland_river\", \"lowland_river\", \"lake\",\"shallow sea\"],\n      description: \"\",\n      helpText: \"\",\n      options: [\n        {\n          title: \"Shoo them away\",\n          effectText: \"The water stays clean, with less for the algae to eat\",\n          video: null,\n          image: \"\",\n          description: \"Shoo away the birds\",\n          effect: {\n            duration: 0,\n            algae_survive: 1,\n            growth_factor: 1\n          }\n        },\n        {\n          title: \"Let them stay\",\n          effectText: \"Bird poo releases phosphates and nitrates that feed algae\",\n          video: null,\n          image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/lilducks.jpg?raw=true\",\n          description: \"Keep the birds\",\n          effect: {\n            duration: 4,\n            algae_survive: 1,\n            growth_factor: 3\n          }\n        }\n      ]\n    },\n    {\n      title: \"Sewage draining!\",\n      video: null,\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/lilducks.jpg?raw=true\",\n      eligible_areas: [\"upland_river\", \"lowland_river\", \"lake\"],\n      description:\n        \"A local sewage company want to use your lake for drainage, for a handsome price. \",\n      helpText: \"\",\n      options: [\n        {\n          title: \"Let Them\",\n          effectText: \"The sewage feeds the algae and poisons the water\",\n          video: null,\n          image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/lilducks.jpg?raw=true\",\n          description: \"Say Yes To Sewage\",\n          effect: {\n            duration: 28,\n            algae_survive: 1,\n            growth_factor: 5\n          }\n        },\n        {\n          title: \"Say No\",\n          effectText: \"The sewage would have fed the algae and poisoned the water\",\n          video: null,\n          image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/lilducks.jpg?raw=true\",\n          description: \"Say No To Sewage\",\n          effect: {\n            duration: 0,\n            algae_survive: 1,\n            growth_factor: 1\n          }\n        }\n      ]\n    },\n    {\n      title: \"There was a warm spell!\",\n      eligible_areas: [\"upland_river\", \"lowland_river\", \"lake\", \"shallow_sea\", \"deep_sea\"],\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/sun.jpg?raw=true\",\n      description: \"\",\n      helpText: \"\",\n      options: [\n        {\n          title: \"Sunny Weather\",\n          effectText: \"Warm sunny weather helps algae grow\",\n          video: null,\n          image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/sun.jpg?raw=true\",\n          description: \"Sunny Weather\",\n          effect: {\n            duration: 2,\n            algae_survive: 1,\n            growth_factor: 2\n          }\n        }\n      ]\n    },\n    {\n      title: \"There was a big storm!\",\n      eligible_areas: [\"upland_river\", \"lowland_river\", \"lake\", \"shallow_sea\", \"deep_sea\"],\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/storm.webp?raw=true\",\n      description: \"\",\n      helpText: \"\",\n      options: [\n        {\n          title: \"Stormy Weather\",\n          description: \"Stormy Weather\",\n          effectText: \"Storms wash nutrients into the water from the land, helping algae to flourish.\",\n          video: null,\n          image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/storm.webp?raw=true\",\n          effect: {\n            duration: 1,\n            algae_survive: 1,\n            growth_factor: 2\n          }\n        }\n      ]\n    },\n    {\n      title: \"There was a cloudy period!\",\n      eligible_areas: [\"upland_river\", \"lowland_river\", \"lake\", \"shallow_sea\", \"deep_sea\"],\n      image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/storm.webp?raw=true\",\n      description: \"\",\n      helpText: \"\",\n      options: [\n        {\n          title: \"Cloudy Weather\",\n          effectText: \"Clouds block the sun from reaching the water's surface which reduces the rate that your bloom can grow at\",\n          video: null,\n          image: \"https://github.com/Verocoder/algae-adventure/blob/master/src/images/storm.webp?raw=true\",\n          description: \"Cloudy Weather\",\n          effect: {\n            duration: 4,\n            algae_survive: 1,\n            growth_factor: 0.5\n          }\n        }\n      ]\n    }\n  ]\n};\n\nmodule.exports = gameplay;","import React from 'react'\nimport { Container, Header, Image, Progress, Segment } from 'semantic-ui-react'\nimport ReactPlayer from 'react-player'\n\n\nexport default class ChoiceEffectDisplay extends React.Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            advanceTimeoutSeconds: (this.props.choice.effectDisplayTimeout ? this.props.choice.effectDisplayTimeout : 5),\n            advancePercent: 0    \n        };\n        this.state.advanceTimeoutRemaining = this.state.advanceTimeoutSeconds;\n        this.advanceTimeoutHandle = null;\n    }\n\n    componentDidMount(){\n        if(!this.props.choice.video){\n            this.advanceTimeoutHandle = setInterval(this.advance.bind(this), 1000)\n        }\n    }\n\n    componentWillUnmount(){\n        if(this.advanceTimeoutHandle){\n            clearTimeout(this.advanceTimeoutHandle)\n            this.advanceTimeoutHandle = null\n        }\n    }\n\n    advance(){\n        this.setState(state => {\n            let newState = {\n                advanceTimeoutRemaining: state.advanceTimeoutRemaining - 1,\n                advancePercent: (state.advanceTimeoutSeconds - (state.advanceTimeoutRemaining - 1)) * 100 / state.advanceTimeoutSeconds\n            }\n            if(newState.advanceTimeoutRemaining <= 0){\n                clearInterval(this.advanceTimeoutHandle)\n                this.advanceTimeoutHandle = null;\n                setTimeout(this.props.onComplete, 1000)\n            }\n            return newState;\n        })\n    }\n\n    render(){\n        let media = null;\n        if(this.props.choice.video){\n            media = (\n                <ReactPlayer playing={true} loop={false} url={this.props.choice.video} onEnded={this.props.onComplete} onError={this.props.onComplete}></ReactPlayer>\n            )\n        } else if(this.props.choice.image){\n            media = (\n                <Image centered src={this.props.choice.image} />\n            )\n        }\n\n        let effectText = null;\n        if(this.props.choice.effectText) {\n            effectText = (\n                <Segment raised>\n                    {this.props.choice.effectText}\n                </Segment>\n            )\n        }\n\n        let advanceTimer = null;\n        if(!this.props.choice.video){\n            advanceTimer = <Progress percent={this.state.advancePercent} size='medium' />\n        }\n\n        return (\n            <div style={{ marginRight: 260, padding: 20 }}>\n                <div style={{ maxWidth: 850, padding: 20, marginLeft: 'auto', marginRight: 'auto' }}>\n                    <Header size=\"large\" centered>{this.props.choice.title}</Header>\n                    {media}\n                    \n                    <Container fluid style={{ marginTop: 20 }}>\n                        {effectText}\n                        {advanceTimer}\n                    </Container>\n                </div>\n            </div>\n        )\n    }\n}\n\n","import React from 'react'\nimport { Button, Container, Segment, Header, Image, Popup } from 'semantic-ui-react'\nimport ReactPlayer from 'react-player'\n\nexport default class DecisionPrompt extends React.Component {\n\n    constructor(props){\n        super(props)\n        this.state = {\n            mediaPlaying: !!this.props.activeQuestion.video\n        }\n    }\n\n    onMediaEnd(){\n        this.setState({mediaPlaying: false})\n    }\n\n    render(){\n        let buttons = []\n        for(let i = 0; i < this.props.activeQuestion.options.length; i++){\n            let question = this.props.activeQuestion.options[i]\n            buttons.push(\n            <Popup position='top center' trigger={<Button primary onClick={(e) => this.props.onSelect(e, question, i)}>{question.title}</Button>}>\n                <Popup.Header>{question.title}</Popup.Header>\n                <Popup.Content>\n                {question.description}\n                </Popup.Content>\n            </Popup>\n            )\n            if(i < this.props.activeQuestion.options.length - 1){\n                buttons.push(<Button.Or />)\n            }\n        }\n        let decision = null\n        if(!this.state.mediaPlaying){\n            let description = null;\n            if(this.props.activeQuestion.description){\n                description = (\n                    <Container fluid>\n                        <Segment raised>\n                            {this.props.activeQuestion.description}\n                        </Segment>\n                    </Container>\n                )\n            }\n            decision = (\n                <Container fluid>\n                    {description}\n\n                    <Button.Group size='huge' fluid style={{ padding: '30px 0px' }}>\n                    {buttons}\n                    </Button.Group>\n                </Container>\n            )\n        }\n        let media = null;\n        if(this.props.activeQuestion.video){\n            media = (\n                <ReactPlayer playing={true} loop={false} url={this.props.activeQuestion.video} onEnded={this.onMediaEnd.bind(this)} onError={this.onMediaEnd.bind(this)}></ReactPlayer>\n            )\n        } else {\n            media = (\n                <Image centered src={this.props.activeQuestion.image} />\n            )\n        }\n\n        return (\n            <div style={{ marginRight: 150 }}>\n                <div style={{ maxWidth: 850, padding: 20, marginLeft: 'auto', marginRight: 'auto' }}>\n                    <Header size=\"large\">{this.props.activeQuestion.title}</Header>\n                    {media}\n                    {decision}\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react'\nimport { Card, Image } from 'semantic-ui-react'\n\nimport * as gameplay from './gameplay'\n\nexport default class DecisionPrompt extends React.Component {\n    constructor(props){\n        super(props)\n\n        this.locations = gameplay.locations\n    }\n\n    render(){\n        let locationCards = []\n        Object.entries(this.locations).forEach(([locationId, location]) => {\n            locationCards.push(\n                <Card onClick={(e) => this.props.onSelect(e, locationId)}>\n                    <Image src={location.image} wrapped ui={false} />\n                    <Card.Content>\n                    <Card.Header>{location.title}</Card.Header>\n                    <Card.Description>{location.description}</Card.Description>\n                    </Card.Content>\n                </Card>\n            )\n        });\n        return (\n            <div style={{ marginRight: 150 }}>\n                <div style={{ maxWidth: 850, padding: 20, marginLeft: 'auto', marginRight: 'auto' }}>\n                    <Card.Group itemsPerRow=\"3\" centered>\n                        {locationCards}\n                    </Card.Group>\n                </div>\n            </div>\n        )\n    }\n}","import React from 'react'\nimport { Container, Header, Image, Progress, Segment } from 'semantic-ui-react'\n\n\nexport default class TimeElapsePlaceholder extends React.Component {\n    \n\n    render(){\n        return (\n            <div style={{ marginRight: 260, padding: 20 }}>\n                <div style={{ maxWidth: 1000, padding: 20, marginLeft: 'auto', marginRight: 'auto' }}>\n                    <Header size=\"large\" centered>Growing...</Header>\n                    <Image centered src=\"https://cff2.earth.com/uploads/2019/07/26121452/Algae-may-have-joined-with-fungi-to-give-rise-to-the-first-terrestrial-plants-730x410.jpg\" />\n                    <Container fluid>\n                        <Segment raised style={{ marginTop: 20 }}>\n                            Nothing exciting happens this week, your algae focusses on growing as much as it can.\n                        </Segment>\n                        <Progress percent={this.props.percent} size='medium' />\n                    </Container>\n                    \n                </div>\n            </div>\n        )\n    }\n}\n\n","import React from 'react'\n\n\nexport default class AlgaeMinimap extends React.Component {\n\n    constructor(props){\n        super(props)\n\n        //Props: \n        // background\n        // percent\n        this.state = {\n            canvasWidth: 1,\n            canvasHeight: 1,\n        }\n\n        this.canvasWaterMask = null\n    }\n\n    componentDidMount(){\n        this.drawCanvas()\n    }\n\n    componentDidUpdate(){\n        this.drawCanvas()\n    }\n\n    createWaterMask(ctx){\n        let osc = new OffscreenCanvas(this.state.canvasWidth, this.state.canvasHeight)\n        let oscCtx = osc.getContext(\"2d\")\n        oscCtx.fillStyle = 'rgba(0, 0, 0, 255)'\n        oscCtx.beginPath()\n        oscCtx.arc(Math.floor(osc.width / 2), Math.floor(osc.height / 2), 0, Math.PI * 2, true)\n        oscCtx.fill()\n        let srcImageData = ctx.getImageData(0, 0, osc.width, osc.height)\n        let dstImageData = oscCtx.getImageData(0, 0, osc.width, osc.height)\n        for(let x = 0; x < osc.width; x ++){\n            for(let y = 0; y < osc.height; y++){\n                let coord = ((y * (osc.width)) + x) * 4;\n                if(srcImageData.data[coord] === 0xaa && srcImageData[coord + 1] == 0xda && srcImageData[coord + 2] == 0xff){\n                    dstImageData[coord] = 0x0d\n                    dstImageData[coord + 1] = 0x56\n                    dstImageData[coord + 2] = 0x06\n                }else{\n                    dstImageData[coord + 3] = 0\n                }\n            }\n        }\n        oscCtx.putImageData(oscCtx, 0, 0)\n    }\n\n    drawCanvas(){\n        const canvas = this.refs.canvas\n        const ctx = canvas.getContext(\"2d\")\n        const img = this.refs.image\n        if(img.width){\n            ctx.drawImage(img, 0, 0)\n            /*if(typeof window.OffscreenCanvas !== \"undefined\"){\n                let canvasMask = this.createWaterMask(ctx)\n                ctx.drawImage(canvasMask, 0, 0)\n            }*/\n        }else{\n            img.onload = () => {\n                if(img.width !== this.state.canvasWidth || img.height !== this.state.canvasHeight){\n                    this.setState({\n                        canvasWidth: img.width,\n                        canvasHeight: img.height\n                    })\n                    return\n                }\n                this.drawCanvas()\n            }\n        }\n    }\n\n    render(){\n        \n\n        return (\n            <div style={{ padding: 20 }}>\n                <canvas ref=\"canvas\" width={this.state.canvasWidth} height={this.state.canvasHeight} style={{width: \"100%\", height: \"100%\"}}></canvas>\n                <div style={{ width: 1, height: 1, overflow: \"hidden\"}}>\n                    <img ref=\"image\" src={this.props.background} style={{visibility: \"hidden\"}} />\n                </div>\n            </div>\n        )\n    }\n}\n\n","import * as gameplay from './gameplay'\n\nexport default class Engine {\n\n  constructor(location, weekCount){\n    this.weeklyChoiceChance = 0.3;\n    this.location_name = location;\n    this.question_list = this.build_question_list(weekCount);\n    this.question_count = 0;\n    this.growth_factor = gameplay.locations[location].growth_factor;\n    this.algal_ceiling = gameplay.locations[location].algal_ceiling;\n    this.ongoingEffects = [];\n  }\n\n   // return the next question relevant to the location\n  //  always starting with the climate\n  // returns null after final question\n    nextQuestion() {\n      let question = this.question_list[this.question_count];\n      this.question_count += 1;\n      return question;\n    }\n\n    // return the new algae count based on the previous count and any relevant effects\n    // will count new and existing effects, adding new ones to the existing list\n    grow(currentAlgae, newEffects){\n      let remove_indices = [];\n      let iteration_growth_factor = this.growth_factor;\n      let iteration_algae_survive = 1;\n\n      if (currentAlgae > this.algal_ceiling){\n        currentAlgae = currentAlgae / 20;\n      }\n\n      for (let effect of newEffects){\n        if (effect.duration === -1){\n          //special case for climate choice\n          this.growth_factor = this.growth_factor * effect.growth_factor;\n        } else {\n          this.ongoingEffects.push(effect);\n        }\n      }\n\n      for (var i=0; i<this.ongoingEffects.length; i++){\n        let effect = this.ongoingEffects[i];\n        if (effect.duration === 0){\n          remove_indices.push(i);\n        } else {\n          effect.duration -= 1;\n          iteration_growth_factor = iteration_growth_factor * effect.growth_factor;\n          iteration_algae_survive = iteration_algae_survive * effect.algae_survive;\n        }\n      }\n\n      //this seems janky?\n      for (var index in remove_indices){\n         this.ongoingEffects.splice(index);\n      }\n\n      return (currentAlgae * iteration_algae_survive) * (1+iteration_growth_factor/10);\n    }\n\n    build_question_list(weekCount){\n      let question_list = [];\n      question_list.push(gameplay.climate);\n      let random_questions = gameplay.choices.filter(choice => choice.eligible_areas.includes(this.location_name)).sort(() => Math.random() - 0.5);\n\n      for(let i = 1; i < weekCount; i++){\n        if(Math.random() < this.weeklyChoiceChance && random_questions.length >= 0){\n          question_list.push(random_questions.pop())\n        }else{\n          question_list.push(null)\n        }\n      }\n      return question_list;\n    }\n\n}\n","import React from 'react'\nimport Moment from 'react-moment';\nimport 'semantic-ui-less/semantic.less'\nimport {  Sidebar, Statistic, Header,Container, Image, Segment } from 'semantic-ui-react'\nimport ChoiceEffectDisplay from './ChoiceEffectDisplay'\nimport DecisionPrompt from './DecisionPrompt'\nimport EnvironmentDecision from './EnvironmentDecision'\nimport TimeElapsePlaceholder from './TimeElapsePlaceholder'\nimport AlgaeMinimap from './AlgaeMinimap'\nimport Engine from './Engine'\nimport * as gameplay from './gameplay'\n\nexport default class App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      selectedLocation: null,\n      activeQuestion: null,\n      weekNumber: 0,\n      secondsToWeekAdvance: 0,\n      weekAdvancePercentage: 0,\n      weekAdvanceIntervalSeconds: 2,\n      algaeQuantity: 1,\n      videoPlaying: null,\n      ongoingMultipliers: [],\n      gameEnd: false,\n      activeLocation: null\n    };\n\n    this.engine = null;\n    this.weekAdvanceTimeout = null;\n  }\n\n  componentWillUnmount(){\n    if(this.weekAdvanceTimeout != null){\n      clearTimeout(this.weekAdvanceTimeout);\n      this.weekAdvanceTimeout = null;\n    }\n  }\n\n  tickWeek(){\n    this.weekAdvanceTimeout = null;\n    this.setState(state => {\n      let newState = {\n        secondsToWeekAdvance: state.secondsToWeekAdvance - 1,\n        weekAdvancePercentage: (state.weekAdvanceIntervalSeconds - (state.secondsToWeekAdvance - 1)) * 100 / state.weekAdvanceIntervalSeconds\n      };\n      if(newState.secondsToWeekAdvance <= 0){\n        this.weekAdvanceTimeout = setTimeout(this.answerQuestion.bind(this, null, null), 1000);\n      }else{\n        this.weekAdvanceTimeout = setTimeout(this.tickWeek.bind(this), 1000)\n      }\n      return newState;\n    });\n  }\n\n  selectLocation(e, locationId){\n    this.engine = new Engine(locationId, 14);\n    let location = gameplay.locations[locationId];\n    this.setState({activeLocation: location})\n    this.answerQuestion(null, location)\n    \n  }\n\n  advance(choice){\n    this.weekAdvanceTimeout = null;\n    let effects = []\n    if(choice && choice.effect){\n      effects.push(choice.effect)\n    }\n    this.setState(state => {\n      let newState = {\n        choiceEffectDisplay: null,\n        algaeQuantity: this.engine.grow(state.algaeQuantity, effects),\n        weekNumber: state.weekNumber + 1\n      }\n      if(newState.weekNumber >= 28){\n        newState.gameEnd = true\n      }else {\n        newState.activeQuestion = this.engine.nextQuestion();\n        if(!newState.activeQuestion){\n          // Timer\n          newState.secondsToWeekAdvance = state.weekAdvanceIntervalSeconds;\n          newState.weekAdvancePercentage = 0\n          this.weekAdvanceTimeout = setTimeout(this.tickWeek.bind(this), 1000);\n        }\n      }\n      \n      return newState;\n    })\n  }\n\n  answerQuestion(e, choice){\n    if(choice && (choice.video || choice.image || choice.effectText)){\n      this.nextAdvanceCallback = this.advance.bind(this, choice)\n      this.setState({\n        choiceEffectDisplay: choice\n      });\n    }else{\n      this.advance(choice)\n    }\n    \n  }\n\n\n  render() {\n    let activeContent;\n\n    if(this.state.choiceEffectDisplay){\n      activeContent = <ChoiceEffectDisplay choice={this.state.choiceEffectDisplay} onComplete={this.nextAdvanceCallback} />\n    }else if(this.state.gameEnd){\n      activeContent = <div>\n      <Header size=\"large\" centered>The Growing Season Ends</Header>\n      <Image centered src=\"https://cff2.earth.com/uploads/2019/07/26121452/Algae-may-have-joined-with-fungi-to-give-rise-to-the-first-terrestrial-plants-730x410.jpg\" />\n      <Container fluid style={{ marginTop: 20 }}>\n        <Segment>\n            <p>The Algal Bloom reaches a total of {Math.round(this.state.algaeQuantity).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")} tonnes and dies off.</p>\n            <p>It will return next year.</p>\n            <p>Algal Blooms like this produce toxins and consume oxygen and if they grow too large call kill of fish in the area.</p>\n          </Segment>\n        </Container>\n      </div>\n    } else if(this.state.activeQuestion == null){\n      if(this.engine == null){\n        activeContent = <EnvironmentDecision onSelect={this.selectLocation.bind(this)}></EnvironmentDecision>\n      }else{\n        activeContent = <TimeElapsePlaceholder percent={this.state.weekAdvancePercentage} />\n      }\n    }else {\n      activeContent = <DecisionPrompt activeQuestion={this.state.activeQuestion} onSelect={this.answerQuestion.bind(this)}></DecisionPrompt>\n    }\n\n    let minimap = null;\n    if(this.state.activeLocation != null){\n      minimap = <AlgaeMinimap background={this.state.activeLocation.minimap} percent={this.state.algaeQuantity / this.state.activeLocation.algal_ceiling}  />\n    }\n    \n\n    return (\n      <div style={{ width: '100vw', height: '100vh' }}>\n        <Sidebar direction='right' visible width='wide'>\n          <Header textAlign='center' size='large' style={{ paddingTop: 20 }}>Algae Adventures</Header>\n            <Statistic.Group widths='1' style={{ paddingTop: 20 }}>\n            <Statistic>\n              <Statistic.Label>Algae Volume</Statistic.Label>\n              <Statistic.Value>{Math.round(this.state.algaeQuantity).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}</Statistic.Value>\n              <Statistic.Label>Tonnes</Statistic.Label>\n            </Statistic>\n          </Statistic.Group>\n          <Statistic.Group widths='1' style={{ paddingTop: 20 }}>\n            <Statistic>\n              <Statistic.Label>Week</Statistic.Label>\n              <Statistic.Value>{this.state.weekNumber}</Statistic.Value>\n              <Statistic.Label><Moment parse=\"YYYY-MM-DD\" add={{weeks: this.state.weekNumber - 1}} format=\"MMMM Do\">2000-03-01</Moment></Statistic.Label>\n            </Statistic>\n          </Statistic.Group>\n          {minimap}\n        </Sidebar>\n\n        {activeContent}\n      </div>\n    )\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}